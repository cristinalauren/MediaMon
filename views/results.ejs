<% include partials/header %>


<!-- <br>
<h1 class="masthead"> The Monitor </h1>
<br> -->

<% if (isAuthenticated) { %>
<br>
<br>
<div>
  ***CAVEAT*** <br> App not complete, new keywords are generated per search and currently cannot be deleted. Log out to search trial keywords. Please note that API has limited capacity.
</div>
<% } %>

<p>
  <form action="/search" method="GET">
    <div class="form-group" >
      <input type="text" name="keyword" id="keyword" size="30" class="form-control" placeholder="SEARCH THE MONITOR">
    </div>
  </form>
  </p>


<% if (isAuthenticated) { %>
  <div class="keyworddiv">
    <% if (keywordList.length > 0) { %>
        <% keywordList.forEach(function (keyword) { %>
        <button type="button" class="btn btn-md">
          <span class="glyphicon glyphicon-remove removebtn"></span>
          <span><a href="/search?keyword=<%= keyword.name %>"><%= keyword.name%></a></span>
        </button>
      <% }) %>
    <% } %>
  </div>
<% } %>



  <div id="container">
    <% if (articleList !== []) { %>
      <% articleList.forEach(function (articleObj) {%>
          <% articleObj.guardian.forEach(function (article) { %>

            <div class="articlediv">



              <a href="<%= article.url %>"> <%=article.title%></a>
                 <br> <%=article.date%> <br> <%= article.source %>

                 <br><br>Keyword: <%= article.keyword %><br>
                 <p>
              <a href="https://twitter.com/share"
              class="twitter-share-button"
              data-counturl="<%= article.url %>"
              data-count="horizontal"
              data-text="<%= article.title %> by <%= article.twitter %>: <%= article.url %>"
              data-related="twitterdev:Twitter Developer Relations">
              Tweet
              </a>
              <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');
              </script><br>
              </p>
                 <br>

            </div>
          <% }) %>

          <% articleObj.nyt.forEach(function (article){ %>

            <div class="articlediv">

              <a href="<%= article.url %>"><%=article.title%></a>
              <br> <%=article.date%> <br> <%= article.source %>

              <% if (article.summary !== undefined) {%>
                <p>"<%= article.summary %>"</p>
              <% } %>
              <br><br>Keyword: <%= article.keyword %>
                 <p>
              <a href="https://twitter.com/share"
              class="twitter-share-button"
              data-counturl="<%= article.url %>"
              data-count="horizontal"
              data-text="<%= article.title %> by <%= article.twitter %>: <%= article.url %>"
              data-related="twitterdev:Twitter Developer Relations">
              Tweet
              </a>
              <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');
              </script><br>
              </p>
            </div>

          <% })%>
      <% }) %>
    <% } %>
  </div>





<% include partials/footer %>